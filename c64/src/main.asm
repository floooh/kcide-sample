POSX = 80
POSY = 80
WIDTH = 24
HEIGHT = 21


    ; C64 PRGs usually start at address $801
    org $801
    ; this is the usual C64 BASIC stub for starting the program via "RUN"
    dw .next, 10         ; next line and current line number
    db $9e, " 2064", 0  ; "SYS 2064" (2064 == $810)
.next: db 0             ; end of BASIC program
    org $810
_start:                 ; execution starts here
    jsr init_colors
    jsr init_sprites
.loop:
    jmp .loop

init_sprites:
    lda #15
    sta $d015           ; enable sprite 0..3
;    sta $d01D           ; double width
;    sta $d017           ; double height
    sta $d01b           ; priority behind foreground

    ldx #(sprite0/64)   ; sprite data pointer
    stx $07f8
    inx
    stx $07f9
    inx
    stx $07fa
    inx
    stx $07fb

    lda #POSX           ; position
    sta $d000           ; sprite0 posx
    sta $d004           ; sprite2 posx
    lda #POSX+WIDTH
    sta $d002           ; sprite1 posx
    sta $d006           ; sprite3 posx
    lda #POSY
    sta $d001           ; sprite0 posy
    sta $d003           ; sprite1 posy
    lda #POSY+HEIGHT
    sta $d005           ; sprite2 posy
    sta $d007           ; sprite3 posy

    lda #14             ; bright-blue color
    sta $d027
    sta $d028
    sta $d029
    lda #10             ; bright-red color
    sta $d02A

    rts

init_colors:
    lda #12             ; set border color to light grey
    sta $d020
    lda #11             ; set background color to dark grey
    sta $d021
    lda #13             ; clear char colors to light green
    ldx #0
.loop:
    sta $d800,x
    sta $d900,x
    sta $da00,x
    sta $db00,x
    dex
    bne .loop
    rts

    ; top-left quadrant
    align $40
sprite0:
    db %00000000, %00000000, %11111111
    db %00000000, %00000111, %11111111
    db %00000000, %00011111, %11111111
    db %00000000, %01111111, %11111111
    db %00000000, %11111111, %11111111
    db %00000001, %11111111, %11111111
    db %00000011, %11111111, %11111111
    db %00000111, %11111111, %11111111

    db %00001111, %11111111, %11111111
    db %00011111, %11111111, %11111111
    db %00011111, %11111111, %11111111
    db %00111111, %11111111, %10000000
    db %00111111, %11111110, %00000000
    db %01111111, %11111100, %00000000
    db %01111111, %11111000, %00000000
    db %01111111, %11110000, %00000000

    db %11111111, %11110000, %00000000
    db %11111111, %11100000, %00000000
    db %11111111, %11100000, %00000000
    db %11111111, %11100000, %00000000
    db %11111111, %11100000, %00000000

    ; top-right quadrant
    align $40
sprite1:
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000

    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %01111111, %11111111, %11100000
    db %01111111, %11111111, %11000000
    db %01111111, %11111111, %10000000
    db %01111111, %11111111, %00000000

    db %01111111, %11111110, %00000000
    db %01111111, %11111100, %00000000
    db %01111111, %11111000, %00000000
    db %01111111, %11110000, %00000000
    db %00000000, %00000000, %00000000

    ; bottom-left quadrant
    align $40
sprite2:
    db %11111111, %11100000, %00000000
    db %11111111, %11100000, %00000000
    db %11111111, %11100000, %00000000

    db %11111111, %11100000, %00000000
    db %11111111, %11110000, %00000000
    db %01111111, %11110000, %00000000
    db %01111111, %11111000, %00000000
    db %01111111, %11111100, %00000000
    db %00111111, %11111110, %00000000
    db %00111111, %11111111, %10000000
    db %00011111, %11111111, %11111111

    db %00011111, %11111111, %11111111
    db %00001111, %11111111, %11111111
    db %00000111, %11111111, %11111111
    db %00000011, %11111111, %11111111
    db %00000001, %11111111, %11111111
    db %00000000, %11111111, %11111111
    db %00000000, %01111111, %11111111
    db %00000000, %00011111, %11111111

    db %00000000, %00000111, %11111111
    db %00000000, %00000000, %11111111

    ; bottom-right quadrant
    align $40
sprite3:
    db %00000000, %00000000, %00000000
    db %01111111, %11110000, %00000000
    db %01111111, %11111000, %00000000

    db %01111111, %11111100, %00000000
    db %01111111, %11111110, %00000000
    db %01111111, %11111111, %00000000
    db %01111111, %11111111, %10000000
    db %01111111, %11111111, %11000000
    db %01111111, %11111111, %11100000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000

    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000

    db %00000000, %00000000, %00000000
    db %00000000, %00000000, %00000000
